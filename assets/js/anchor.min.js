!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():(a.AnchorJS=b(),a.anchors=new a.AnchorJS)}(this,function(){"use strict";function a(a){function b(a){a.icon=a.hasOwnProperty("icon")?a.icon:"",a.visible=a.hasOwnProperty("visible")?a.visible:"hover",a.placement=a.hasOwnProperty("placement")?a.placement:"right",a.ariaLabel=a.hasOwnProperty("ariaLabel")?a.ariaLabel:"Anchor",a.class=a.hasOwnProperty("class")?a.class:"",a.truncate=a.hasOwnProperty("truncate")?Math.floor(a.truncate):64}function c(a){var b;if("string"==typeof a||a instanceof String)b=[].slice.call(document.querySelectorAll(a));else{if(!(Array.isArray(a)||a instanceof NodeList))throw new Error("The selector provided to AnchorJS was invalid.");b=[].slice.call(a)}return b}function d(){if(null===document.head.querySelector("style.anchorjs")){var a,b=document.createElement("style");b.className="anchorjs",b.appendChild(document.createTextNode("")),a=document.head.querySelector('[rel="stylesheet"], style'),void 0===a?document.head.appendChild(b):document.head.insertBefore(b,a),b.sheet.insertRule(" .anchorjs-link {   opacity: 0;   text-decoration: none;   -webkit-font-smoothing: antialiased;   -moz-osx-font-smoothing: grayscale; }",b.sheet.cssRules.length),b.sheet.insertRule(" *:hover > .anchorjs-link, .anchorjs-link:focus  {   opacity: 1; }",b.sheet.cssRules.length),b.sheet.insertRule(" [data-anchorjs-icon]::after {   content: attr(data-anchorjs-icon); }",b.sheet.cssRules.length),b.sheet.insertRule(' @font-face {   font-family: "anchorjs-icons";   src: url(data:n/a;base64,AAEAAAALAIAAAwAwT1MvMg8yG2cAAAE4AAAAYGNtYXDp3gC3AAABpAAAAExnYXNwAAAAEAAAA9wAAAAIZ2x5ZlQCcfwAAAH4AAABCGhlYWQHFvHyAAAAvAAAADZoaGVhBnACFwAAAPQAAAAkaG10eASAADEAAAGYAAAADGxvY2EACACEAAAB8AAAAAhtYXhwAAYAVwAAARgAAAAgbmFtZQGOH9cAAAMAAAAAunBvc3QAAwAAAAADvAAAACAAAQAAAAEAAHzE2p9fDzz1AAkEAAAAAADRecUWAAAAANQA6R8AAAAAAoACwAAAAAgAAgAAAAAAAAABAAADwP/AAAACgAAA/9MCrQABAAAAAAAAAAAAAAAAAAAAAwABAAAAAwBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAMCQAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAg//0DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAAIAAAACgAAxAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADAAAAAIAAgAAgAAACDpy//9//8AAAAg6cv//f///+EWNwADAAEAAAAAAAAAAAAAAAAACACEAAEAAAAAAAAAAAAAAAAxAAACAAQARAKAAsAAKwBUAAABIiYnJjQ3NzY2MzIWFxYUBwcGIicmNDc3NjQnJiYjIgYHBwYUFxYUBwYGIwciJicmNDc3NjIXFhQHBwYUFxYWMzI2Nzc2NCcmNDc2MhcWFAcHBgYjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAAADACWAAEAAAAAAAEACAAAAAEAAAAAAAIAAwAIAAEAAAAAAAMACAAAAAEAAAAAAAQACAAAAAEAAAAAAAUAAQALAAEAAAAAAAYACAAAAAMAAQQJAAEAEAAMAAMAAQQJAAIABgAcAAMAAQQJAAMAEAAMAAMAAQQJAAQAEAAMAAMAAQQJAAUAAgAiAAMAAQQJAAYAEAAMYW5jaG9yanM0MDBAAGEAbgBjAGgAbwByAGoAcwA0ADAAMABAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAP) format("truetype"); }',b.sheet.cssRules.length)}}this.options=a||{},this.elements=[],b(this.options),this.isTouchDevice=function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},this.add=function(a){var e,f,g,h,i,j,k,l,m,n,o,p=[];if(b(this.options),o=this.options.visible,"touch"===o&&(o=this.isTouchDevice()?"always":"hover"),a||(a="h2, h3, h4, h5, h6"),e=c(a),0===e.length)return this;for(d(),f=document.querySelectorAll("[id]"),g=[].map.call(f,function(a){return a.id}),i=0;i<e.length;i++)if(this.hasAnchorJSLink(e[i]))p.push(i);else{if(e[i].hasAttribute("id"))h=e[i].getAttribute("id");else if(e[i].hasAttribute("data-anchor-id"))h=e[i].getAttribute("data-anchor-id");else{l=this.urlify(e[i].textContent),m=l,k=0;do{void 0!==j&&(m=l+"-"+k),j=g.indexOf(m),k+=1}while(-1!==j);j=void 0,g.push(m),e[i].setAttribute("id",m),h=m}h.replace(/-/g," "),n=document.createElement("a"),n.className="anchorjs-link "+this.options.class,n.href="#"+h,n.setAttribute("aria-label",this.options.ariaLabel),n.setAttribute("data-anchorjs-icon",this.options.icon),"always"===o&&(n.style.opacity="1"),""===this.options.icon&&(n.style.font="1em/1 anchorjs-icons","left"===this.options.placement&&(n.style.lineHeight="inherit")),"left"===this.options.placement?(n.style.position="absolute",n.style.marginLeft="-1em",n.style.paddingRight="0.5em",e[i].insertBefore(n,e[i].firstChild)):(n.style.paddingLeft="0.375em",e[i].appendChild(n))}for(i=0;i<p.length;i++)e.splice(p[i]-i,1);return this.elements=this.elements.concat(e),this},this.remove=function(a){for(var b,d,e=c(a),f=0;f<e.length;f++)(d=e[f].querySelector(".anchorjs-link"))&&(b=this.elements.indexOf(e[f]),-1!==b&&this.elements.splice(b,1),e[f].removeChild(d));return this},this.removeAll=function(){this.remove(this.elements)},this.urlify=function(a){var c=/[& +$,:;=?@"#{}|^~[`%!'<>\]\.\/\(\)\*\\]/g;return this.options.truncate||b(this.options),a.trim().replace(/\'/gi,"").replace(c,"-").replace(/-{2,}/g,"-").substring(0,this.options.truncate).replace(/^-+|-+$/gm,"").toLowerCase()},this.hasAnchorJSLink=function(a){var b=a.firstChild&&(" "+a.firstChild.className+" ").indexOf(" anchorjs-link ")>-1,c=a.lastChild&&(" "+a.lastChild.className+" ").indexOf(" anchorjs-link ")>-1;return b||c||!1}}return a});